<!DOCTYPE html>
<html>
<head lang="zh-cn">
    <meta charset="UTF-8">
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no, width=device-width">
    <title>上传图片</title><style>
    body {
        font-size: 14px;
        color: #555;
    }

    ul, li {
        list-style: none;
        margin:0;
        padding: 0;
    }

    img {
        height: 204px;
    }

    hr {
        border:1px dashed #eee;
        margin: 30px 0;
        position: relative;
        text-align: center;
    }

    hr:before {
        color: #777;
        font-size: 12px;
        content: '另存压缩图片查看压缩，console查看返回信息。';
        position: absolute;
        top: -8px;
    }

    .ng-cloak {
        display: none;
    }

    .text-muted {
        color: #999;
    }
    
    .pull-left {
        float: left;
    }

    .left ul {
        padding:0 40px 0 10px;
        overflow: hidden;
    }

    .left ul li {
        margin-bottom: 5px;
    }

    .lr {
        margin:0 30px 20px 0;
    }

    [ng-src] {
        box-shadow: 0 0 5px rgba(0,0,0,0.7);
    }

</style>
</head>

<body ng-controller="appCtrl" class="ng-cloak">

<div class="left">

    <l-r-img class="pull-left"  quality ="0.9"  success="ok" ng-model="b" ></l-r-img>
    <img ng-src="{{b.base64}}" alt=""/>
    <input value="{{b.base64}}" id="go" />
</div>
<script src="angular.min.js"></script>
<script src="localResize.angular.mobile.min.js"></script>


<script>
    var app = angular.module('app', ['localResizeIMG']);

    app.controller('appCtrl', function ($scope) {
        $scope.ok = function (stop, data) {
            alert(document.getElementById("go").value);
            data.original.size = (data.original.size / 1024).toFixed(2);
            $scope.$apply();
			setTimeout(function () {
					stop();
                    console.log(data);
			}, 1000);
		}	
    });

    angular.bootstrap(document, ['app']);

</script>
</body>
</html>
